<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - TechPhone Pro</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .container {
            max-width: 800px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .cart-summary, .payment-options, .shipping-form {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .cart-summary img {
            max-width: 100px;
            float: left;
            margin-right: 15px;
        }
        .cart-details {
            overflow: hidden;
        }
        h1, h2 {
            color: #333;
        }
        .total {
            font-weight: bold;
            font-size: 1.2em;
            margin-top: 10px;
        }
        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .continue-shopping {
            background-color: #f0f0f0;
            color: #333;
        }
        .pay-now {
            background-color: #4CAF50;
            color: white;
        }
        .pay-now:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        form {
            display: grid;
            gap: 10px;
        }
        input[type="text"], input[type="email"], select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Checkout</h1>
        <div class="cart-summary">
            <img id="phoneImage" src="smartphone1.png" alt="TechPhone Pro">
            <div class="cart-details">
                <h2>Your Cart</h2>
                <p><strong>Model:</strong> <span id="modelName"></span></p>
                <p><strong>Color:</strong> <span id="colorName"></span></p>
                <p><strong>Storage:</strong> <span id="storageName"></span></p>
                <p class="total">Total: $<span id="totalPrice"></span></p>
            </div>
        </div>
        
        <div class="payment-options">
            <h2>Payment Options</h2>
            <form id="paymentForm">
                <select id="paymentMethod" required>
                    <option value="">Select payment method</option>
                    <option value="credit_card">Credit Card</option>
                    <option value="paypal">PayPal</option>
                    <option value="bank_transfer">Bank Transfer</option>
                </select>
            </form>
        </div>
        
        <div class="shipping-form">
            <h2>Shipping Information</h2>
            <form id="shippingForm">
                <input type="text" id="fullName" placeholder="Full Name" required>
                <input type="text" id="address" placeholder="Address" required>
                <input type="text" id="city" placeholder="City" required>
                <input type="text" id="zipCode" placeholder="ZIP Code" required>
                <input type="email" id="email" placeholder="Email" required>
            </form>
        </div>
        
        <div class="button-container">
            <button class="button continue-shopping" onclick="continueShopping()">Continue Shopping</button>
            <button id="payNowBtn" class="button pay-now" disabled onclick="processPayment()">Pay Now</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get query parameters
            const urlParams = new URLSearchParams(window.location.search);
            const model = urlParams.get('model');
            const color = urlParams.get('color');
            const storage = urlParams.get('storage');
            const price = urlParams.get('price');
            const imageUrl = urlParams.get('image');

            // Update cart summary
            document.getElementById('modelName').textContent = model || 'TechPhone Pro';
            document.getElementById('colorName').textContent = color || 'Black';
            document.getElementById('storageName').textContent = storage || '128GB';
            document.getElementById('totalPrice').textContent = price || '999';

            // Update phone image
            const phoneImage = document.getElementById('phoneImage');
            if (imageUrl) {
                phoneImage.src = imageUrl;
                console.log('Setting image source to:', imageUrl);
                
                // Add an error handler
                phoneImage.onerror = function() {
                    console.error('Failed to load image:', imageUrl);
                    // Fallback to a default image
                    phoneImage.src = 'smartphone_default.png';
                };
            } else {
                console.log('No image URL provided, using default image');
                phoneImage.src = 'smartphone_default.png';
            }

            // Enable/disable Pay Now button based on form completion
            const paymentForm = document.getElementById('paymentForm');
            const shippingForm = document.getElementById('shippingForm');
            const payNowBtn = document.getElementById('payNowBtn');

            function checkForms() {
                if (paymentForm.checkValidity() && shippingForm.checkValidity()) {
                    payNowBtn.disabled = false;
                } else {
                    payNowBtn.disabled = true;
                }
            }

            paymentForm.addEventListener('change', checkForms);
            shippingForm.addEventListener('input', checkForms);
        });

        function continueShopping() {
            window.location.href = 'index.html';
        }

        function processPayment() {
            alert('Payment processed successfully!');
            // Add actual payment processing logic here
        }
    </script>
</body>
</html>
